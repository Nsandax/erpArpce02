{% extends "ErpProject/ModuleRessourcesHumaines/shared/layout.html" %}
{% block page %}
    {%load static %}
    {% load humanize %}
    <div class="row" style="padding-top: 30px;">
        <div class="col-lg-12">
            <h2>{{ title }}</h2>
            <strong style="float: right;color: grey;opacity: 0.4;margin-top: -30px;">{% now "jS F Y H:i" %}</strong>
            <div class="separ" style="background-color: grey;opacity: 0.2"></div>
            <!-- GESTION DU WORKFLOW -->
            {% include 'ErpProject/ErpBackOffice/widget/workflow.html' with utilisateur=utilisateur model=model content_type_id=content_type_id historique=historique roles=roles etapes_suivantes=etapes_suivantes url_add="module_ressourceshumaines_add_conge" url_detail="module_ressourceshumaines_detail_conge" csrf_token=csrf_token module=module type_doc="Congé" only %}
            <!--FIN GESTION DU WORKFLOW-->
            <br><br>
            <!-- Impression -->
            <form method="POST" action="{% url 'back_office_print_objet' %}">
              {% csrf_token %}
              <input type="hidden" name="id" value={{model.id}}>
              <input type="hidden" name="dao" value="print_bon_entree(id)">
              <input type="hidden" name="previous" value="{{ request.path }}">
              <button type="submit" class="btn btn-default" style="background-color: #41435d;border:none;color: white;">Imprimer</button>
            </form>
          <!-- Fin impression -->
          <br>
            <div id="BonPrint" class="panel panel-default" style="border: none;">
                    <div class="panel panel-body" style="background-color:white;">
                      <div class="col-md-12">
                          <div class="col-md-6">
                            <h2 style="color: red; font-weight: bold">DEMANDE DE CONGE N° {{model.numero_conge}}</h3>
                              <h3>ARPCE</h3>
                              <p>Brazzaville, R. Congo <br> + 242 05 510 72 72</p>
                              <p>91 bis Avenue de l'Amitié <br> Centre ville Brazzaville</p></p>
                          </div>


                          <div class="col-md-6" style="text-align: right;">

                            <h3>{{model.hisemploye}}</h3>

                       </div>

                        <div class="separ col-md-12" style="background-color: grey;opacity: 0.1;margin-bottom: 20px;"></div>
                             <div class="col-md-6">
                                <p><strong>Description:</strong> {{model.description}}  </p>

                                <p><strong>Date début:</strong>  {{model.date_from}} </p>

                                <p><strong>Date fin:</strong>  {{model.date_to}} </p>
                                <p><strong>Type de congé :</strong>  {{model.histypeconge}} </p>

                                <p><strong>Type :</strong>  {{model.type}} </p>

                                <p><strong>Nombre des jours:</strong>  {{model.nombre_jour}} </p>

                                <p><strong>Observation :</strong>  {{model.observation}} </p>


                                </div>
                          </div>
                      </div>
                    </div>
                </div>
            </div>

<!-- Print Info -->
<button type="button" id="lancermodal" data-toggle="modal" data-target="#monmodal" style="display: none;">executer</button>
<div id="monmodal" class="modal fade" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-body">
                <!-- <center>
                    <iframe id="iframemodal" frameborder="0" style="width: 100%;" height="600px"></iframe>
                </center> -->
                <div style="display:flex; justify-content: center;">
                    <iframe id="iframemodal" frameborder="0" style="width: 100%;" height="600px"></iframe>
                </div>
                <hr>
                <center>
                    <button type="button" class="btn btn-danger" data-dismiss="modal">FERMER</button>
                </center>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript" src="{% static 'ErpProject/js/pdf/print.min.js' %}"></script>
<script type="text/javascript" src="{% static 'ErpProject/js/pdf/libs/jspdf.debug.js' %}"></script>
<script type="text/javascript" src="{% static 'ErpProject/js/pdf/libs/cell.js' %}"></script>
<script type="text/javascript" src="{% static 'ErpProject/js/pdf/libs/jspdf.plugin.autotable.min.js' %}"></script>
<script type="text/javascript" src="{% static 'ErpProject/js/pdf/libs/from_html.js' %}"></script>
<script type="text/javascript" src="{% static 'ErpProject/js/pdf/libs/html2canvas.min.js' %}"></script>
<!-- Print Document Function -->
<script>
function printScreen() {
    const filename = 'Bon Entree.pdf';
    var pdf = new jsPDF('l', 'pt', 'ledger');

    pdf.html($('#BonPrint')[0], {
        callback: function (pdf) {
            var string = pdf.output('datauristring');
            $('#iframemodal').attr('src', string);
            $('#lancermodal').click();
        }
    });

    margins = {
        top: 0,
        bottom: 0,
        left: 0,
        width: 0
    };
}
</script>
{% endblock %}
