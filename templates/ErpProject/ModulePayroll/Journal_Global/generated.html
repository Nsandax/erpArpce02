{% extends "ErpProject/ModulePayroll/shared/layout.html" %}
    {% block page %}
        {%load static %}
        {% load account_filters %}
        <style>

        </style>
        <div class="row">
            <ul class="breadcrumb">
                <li><a href="{% url 'backoffice_index' %}"><span class="mif-home"></span></a></li>
                <li><a class="chargement-au-click" href="{% url 'module_payroll_tableau_de_bord' %}">Module Payroll</a></li>
                <li>{{ title }}</li>
            </ul>
        </div>
        <div class="row">
            <button onclick="javascript:document.getElementById('submit').click()" class="theme-btn theme-btn-sm rounded primary_color_{{module.name|lower}} chargement-au-click">Imprimer</button>
            <button id="btn_export" class="theme-btn theme-btn-sm rounded chargement-au-click">Exporter en Excel</button>
            <!-- <button onclick="javascript:window.location.assign('{% url 'module_payroll_generate_Balance_paie' %}')" class="theme-btn theme-btn-sm rounded chargement-au-click">Retour</button> -->
        </div>
        <form id="form" method="POST" action="{% url 'module_payroll_to_print_journal_global' %}">
            {% csrf_token %}
            <input id="submit" type="submit" style="display: none">
            <input type="text" name="exercice" value="{{ exercice }}" style="display: none">
            <input type="text" name="periode" value="{{ periode }}" style="display: none">
        </form>
        <hr class="hr-ligne">

        <div id="divTo#print" class="row item-content" style="margin-top: 20px" style="padding-top: 30px">
            <div style="display:flex;justify-content: center;">
                <img src="{% static 'ErpProject/image/upload/organisation/header.png' %}" style="height:40%;width:40%;">
            </div>
            <div class="separ col-md-12" style="background-color: grey;opacity: 0.1;margin-bottom: 20px;"></div>
                <h4 style="text-align:center;">{{title}}</h4>
            <br>
            <br>
            <div style="overflow-y: auto;">
                <table id="rapport" class="table bordered no-margin" style="width:100%;">
                    <tr>
                        <th>Nom Complet</th>
                        <th>Matricule</th>
                        <th>Genre</th>
                        <th>Fonction</th>
                        <th>Grade</th>
                        <th>Echelon</th>
                        <th>DÃ©pt</th>
                        <th>Periode</th>
                        <th>Sal base</th>
                        <th>Sur Salaire</th>
                        <th>Prime Anc.</th>
                        <th>Prime Fonct.</th>
                        <th>Prime Lgt.</th>
                        <th>Prime Diplome</th>
                        <th>Prime Domest.</th>
                        <th>Prime Eloign.</th>
                        <th>Prime Caisse</th>
                        <th>Prime Risk</th>
                        <th>All. Conge</th>
                        <th>Prime Astr.</th>
                        <th>Prime Paie</th>
                        <th>Sal Brut.</th>
                        <th>Cnss</th>
                        <th>Ac_irpp</th>
                        <th>Prel Mutuel</th>
                        <th>Prim Rep</th>
                        <th>Indemn Trans</th>
                        <th>Cplt Indemn Trans</th>
                        <th>Pret</th>
                        <th>Net_A_Payer</th>
                    </tr>
                    {% for item in models %}
                    <tr>
                        <td>{{item.nom_complet}}</td>
                        <td>{{item.matricule}}</td>
                        <td>{{item.genre}}</td>
                        <td>{{item.fonction}}</td>
                        <td>{{item.grade}}</td>
                        <td>{{item.echelon}}</td>
                        <td>{{item.dept}}</td>
                        <td>{{item.end_date|date:'d/m/Y'}}</td>
                        <td>{{item.sal_base|monetary}}</td>
                        <td>{{item.sur_salaire|monetary}}</td>
                        <td>{{item.prim_anc|monetary}}</td>
                        <td>{{item.prim_fonct|monetary}}</td>
                        <td>{{item.prim_lgt|monetary}}</td>
                        <td>{{item.prim_diplome|monetary}}</td>
                        <td>{{item.prim_domesticite|monetary}}</td>
                        <td>{{item.prim_eloignement|monetary}}</td>
                        <td>{{item.prim_caisse|monetary}}</td>
                        <td>{{item.prim_risque|monetary}}</td>
                        <td>{{item.allocation_conge|monetary}}</td>
                        <td>{{item.prim_astrinte|monetary}}</td>
                        <td>{{item.prim_paie|monetary}}</td>
                        <td>{{item.sal_brut|monetary}}</td>
                        <td>{{item.cnss|monetary}}</td>
                        <td>{{item.ac_irpp|monetary}}</td>
                        <td>{{item.prel_mutuel|monetary}}</td>
                        <td>{{item.prim_rep|monetary}}</td>
                        <td>{{item.indemn_trans|monetary}}</td>
                        <td>{{item.cplt_indemn_trans|monetary}}</td>
                        <td>{{item.pret|monetary}}</td>
                        <td>{{item.net_a_payer|monetary}}</td>
                    </tr>
                    {% endfor %}

                </table>
            </div>
            <br>
            <br>

        </div>
        {% include 'ErpProject/ErpBackOffice/widget/export_excel.html' with btn_id="btn_export" table_id="rapport" filename="journal" only %}
{% endblock %}