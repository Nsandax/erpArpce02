{% extends "ErpProject/ModuleAchat/shared/layout.html" %} {% block page %} {% load humanize %}
<div class="row">
    <ul class="breadcrumb">
        <li><a><span class="mif-home"></span></a></li>
        <li><a class="chargement-au-click" href="{% url 'module_achat_home' %}">Module Achat</a></li>
        <li>{{ title }}</li>
    </ul>
</div>
<div class="row">
    {% if can_create == True %}
    <button onclick="javascript:window.location.assign('{% url 'module_achat_add_facture' %}')" class="button small-button rounded primary_color_{{module.name|lower}} chargement-au-click">Créer</button> {% endif %}
</div>

<hr class="hr-ligne" />
<!-- Appel de la fonction message -->
{% include 'ErpProject/ErpBackOffice/widget/message.html' with messages=messages only %}
<br>

<div class="row" style="margin-top: 10px">
    <table id="example" class="display nowrap border bordered striped" cellspacing="0" style="width:100%">
        <thead>
            <tr>
                <th style="width: 20px; background-color:#2e416a; white"></th>
                <th>Séquence</th>
                <th>Numéro</th>
                <th>Fournisseur</th>
                <th>Date de facturation</th>
                <th>Date d'échéance</th>
                <th>Total</th>
                <th>A payer</th>
                <th>Etat</th>
            </tr>
        </thead>
        <tbody>
            {% for item in model %}
            <tr>
                <td>
                    <label class="small-check">
                        <input type="checkbox">
                        <span class="check"></span>
                    </label>
                </td>
                <td>
                    {{ item.id }}
                </td>
                <td>
                    <a class="lien chargement-au-click" href="{% url 'module_achat_details_facture' item.id %}">{{ item.numero_facture }}</a>
                </td>
                <td>
                    <a class="lien chargement-au-click" href="{% url 'module_achat_details_fournisseur' item.order.fournisseur_id %}">{{ item.order.fournisseur.nom_complet }}</a>
                </td>
                <td> {{ item.date_facturation|date:"d/m/Y" }} </td>
                <td> {{ item.date_echeance|date:"d/m/Y" }} </td>
                <td> {{ item.montant|intcomma }} {{ item.order.devise.symbole_devise }}</td>
                <td> {{ item.montant_restant|intcomma }} {{ item.order.devise.symbole_devise }}</td>
                <td> {{ item.etat_facture }} </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<script>
    $(document).ready(function() {
        $('#example').DataTable({
            dom: 'Bfrtip',
            buttons: [{
                    extend: 'copyHtml5',
                    text: "<span class='mdi mdi-content-copy' style='font-size:1rem;color:#424892;'></span> Copy",
                    titleAttr: "Copier"
                }, {
                    extend: 'excelHtml5',
                    text: "<span class='mdi mdi-file-excel' style='font-size:1rem;color:#236e43;'></span> Excel",
                    titleAttr: "Exporter en excel"
                }, {
                    extend: 'csvHtml5',
                    text: "<span class='mdi mdi-file-outline' style='font-size:1rem;color:#9c27b0;'></span> CSV",
                    titleAttr: "Exporter en csv"
                }, {
                    extend: 'pdfHtml5',
                    text: "<span class='mdi mdi-file-pdf' style='font-size:1rem;color:#f44336;'></span> PDF",
                    titleAttr: "Exporter en pdf"
                },
                //'copyHtml5',
                //'excelHtml5',
                //'csvHtml5',
                //'pdfHtml5'
            ]
        });
    });
</script>
{% endblock %}