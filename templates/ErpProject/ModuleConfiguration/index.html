{% extends "ErpProject/ModuleConfiguration/shared/layout.html" %} {% block page %}
{%load static %}
	<style type="text/css">
		body{
			background-color: grey!important;
		}
	</style>

	<div class="row" style="padding-top: 30px;">
		<div class="col-lg-12">
			<h2>Tableau de Bord</h2>
			<strong style="float: right;color: grey;opacity: 0.4;margin-top: -30px;">{% now "jS F Y H:i" %}</strong>
			<div class="separ" style="background-color: grey;opacity: 0.2"></div>
			<div class="panel panel-default" style="border: none;">
				<div class="panel" style="background-color:#f5f5f5;border: none;">


<!-- Header Bar pour le filtre-->

<div class="col-md-9">
	<div id="vue_G_chart_cross" class="iconChart" style="display: inline; margin-left:1%;">
		<span class="fa fa-area-chart"></span>
	</div>

	<div id="vue_G" class="iconChart" style=" display: inline;margin-left:1%;">
		<span class="fa fa-pie-chart"></span>
	</div>

	<div id="vue_G_chart_perfom" class="iconChart" style=" display: inline;margin-left:1%;">
		<span class="fa fa-line-chart"></span>
	</div>
	<div class="" style="display: inline; margin-left:1%;">
		<span class="fa fa-filter"></span>
		<strong class="dropdown-toggle" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
			aria-expanded="false">


		</strong>

	</div>

	<div class="" style="display: inline; margin-left:2%;">
		<span class="fa fa-info-circle"></span>
		<strong id="vue_G_Globale"> Vue Globale </strong>
	</div>
</div>


<!-- Header Bar pour le filtre-->
</div>

</div>

<!--Graphic -->
<div class="row">
	<div class="col-md-12">
		<div class="panel" style="background-color:#f5f5f5;border: none;">
			<div class="col-md-12" style="padding: 10px;">
				<div>
					<div class="mb-4">

						<div class="card-body">
							<div class="chart-area item-dash" style="padding: 15px;background-color: white;">

								<canvas id="myChart" width="400" height="100"></canvas>
							</div>
						</div>
					</div>
				</div>
			</div>

		</div>
	</div>

</div>
<!--End Graphic -->


				</div>
				<div class="col-md-3">
					<div class="panel panel-success p1" style="border-radius: 10px;border-bottom: none;">
						<div class="panel-heading" style="background-color: transparent;color: white;">
							<div class="row">
								<div class="col-xs-7 text-left">
									<div style="font-weight: 500;">Fournisseurs</div>
									<p  style="font-size: 20px;font-family: gotham">{{ tot_frs }}</p>
								</div>
								<div class="col-xs-5 text-right">
									<i class="fa fa-bank fa-3x" style="float: left;opacity: 0.3"></i>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-3">
					<div class="panel panel-success p2" style="border-radius: 10px;border-bottom: none;">
						<div class="panel-heading" style="background-color: transparent;color: white;">
							<div class="row">
								<div class="col-xs-7 text-left">
									<div style="font-weight: 500;">Services</div>
									<p  style="font-size: 20px;font-family: gotham">{{ total_service }}</p>
								</div>
								<div class="col-xs-5 text-right">
									<i class="fa fa-bank fa-3x" style="float: left;opacity: 0.3"></i>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-3">
					<div class="panel panel-success p3" style="border-radius: 10px;border-bottom: none;">
						<div class="panel-heading" style="background-color: transparent;color: white;">
							<div class="row">
								<div class="col-xs-7 text-left">
									<div style="font-weight: 500;">Conge</div>
									<p  style="font-size: 20px;font-family: gotham">{{ total_user }}</p>
								</div>
								<div class="col-xs-5 text-right">
									<i class="fa fa-bank fa-3x" style="float: left;opacity: 0.3"></i>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-3">
					<div class="panel panel-success p4" style="border-radius: 10px;border-bottom: none;">
						<div class="panel-heading" style="background-color: transparent;color: white;">
							<div class="row">
								<div class="col-xs-7 text-left">
									<div style="font-weight: 500;">Modules</div>
									<p  style="font-size: 20px;font-family: gotham">{{total_Module}}</p>
								</div>
								<div class="col-xs-5 text-right">
									<i class="fa fa-bank fa-3x" style="float: left;opacity: 0.3"></i>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-4"style="padding: 10px;">
					<div  class="item-dash col-md-12" style="overflow: scroll;background-color: white;height: 300px;padding: 20px;padding-top: 25px;">
						<label style="font-weight: 900;display: flex;justify-content: center;">Utilisateurs connectés</label>
						<hr>
						<ul style="width: 100%;padding: 10px;">
							{% for item in UserConnected %}
								<li><strong style="font-weight: 600;">
									 <a class="lien chargement-au-click" href="#">{{ item }}</a>

								</strong></li>

							{% endfor %}

						</ul>
					</div>
				</div>
				<div class="col-md-4"style="padding: 10px;">
						<div class="item-dash col-md-12" style="background-color: white;height: 300px;padding: 20px;padding-top: 25px;">
						<label style="font-weight: 900;display: flex;justify-content: center;">Liste de Roles</label>
						<hr>
						<ul style="width: 100%;padding: 10px;">
							{% for item in ListeRole%}
							<li>
								<strong style="font-weight: 600;">
								<a class="lien chargement-au-click" href="{% url 'module_configuration_details_module' item.id %}">{{ item.nom_module}}</a>
								</strong>
								<p style="float: right;font-size: 12px;color: grey;">Est Installé {{item.est_installe}}
								</p>

							</li>
							{% endfor %}
						</ul>
					</div>
				</div>
				<div class="col-md-4"style="padding: 10px;">
						<div class="item-dash col-md-12" style="background-color: white;height: 300px;padding: 20px;padding-top: 25px;">
						<label style="font-weight: 900;display: flex;justify-content: center;">Les Utilisateurs actifs</label>
						<hr>
						<ul style="width: 100%;padding: 10px;">
							{% for item in Listuser %}
							<li>
								<strong style="font-weight: 600;">
										<a class="lien" href="{% url 'module_configuration_details_utilisateur' item.id %}">{{ item.nom_complet }}</a>
								</strong>
								<p style="float: right;font-size: 12px;color: grey;">{{item.date_entree|date:"d-m-Y"}}
								</p>
								<p style="font-size: 13px;color: grey;">{{item.unite_fonctionnelle.libelle}}</p>
							</li>
							{% endfor %}
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>


	<script src="{% static 'ErpProject/js/Chart.min.js' %}"></script>
	<script src="{% static 'ErpProject/js/chart-pie-demo.js' %}"></script>
	<script src="{% static 'ErpProject/js/chart-area-demo.js' %}"></script>

	<script>


		$(document).ready(function() {
			$('#example').DataTable({
				dom: 'Bfrtip',
				buttons: [{
						extend: 'copyHtml5',
						text: "<span class='mdi mdi-content-copy' style='font-size:1rem;color:#424892;'></span> Copy",
						titleAttr: "Copier"
					}, {
						extend: 'excelHtml5',
						text: "<span class='mdi mdi-file-excel' style='font-size:1rem;color:#236e43;'></span> Excel",
						titleAttr: "Exporter en excel"
					}, {
						extend: 'csvHtml5',
						text: "<span class='mdi mdi-file-outline' style='font-size:1rem;color:#9c27b0;'></span> CSV",
						titleAttr: "Exporter en csv"
					}, {
						extend: 'pdfHtml5',
						text: "<span class='mdi mdi-file-pdf' style='font-size:1rem;color:#f44336;'></span> PDF",
						titleAttr: "Exporter en pdf"
					},
					//'copyHtml5',
					//'excelHtml5',
					//'csvHtml5',
					//'pdfHtml5'
				]
			});
		});
	</script>
<script>
	ctx = document.getElementById('myChart').getContext('2d');
	myChart1 = new Chart(ctx, {
		type: 'bar',
		data: {
			datasets: [{
				label: 'Nombre d\'utilisateurs',
				data: [{{ toGetNombre}}],

		// this dataset is drawn below
		order: 1,
		backgroundColor: [

			'rgba(54, 162, 235, 0.2)',
			'rgba(255, 99, 132, 0.2)',
			'rgba(255, 206, 86, 0.2)',
			'rgba(75, 192, 192, 0.2)',
			'rgba(153, 102, 255, 0.2)',
			'rgba(255, 159, 64, 0.2)'
		],
		borderColor: [
			'rgba(255, 99, 132, 1)',
			'rgba(54, 162, 235, 1)',
			'rgba(255, 206, 86, 1)',
			'rgba(75, 192, 192, 1)',
			'rgba(153, 102, 255, 1)',
			'rgba(255, 159, 64, 1)'
		],
		borderWidth: 2
	},

		{
			label:  'Nombre d\'utilisateurs connectés',
			data: [0,{{ nombreUserConnect }}],

		type: 'bar',
		// this dataset is drawn on top
		order: 2, backgroundColor: [
		'rgba(255, 255, 255, 0.1)',
		'rgba(54, 162, 235, 0.2)',
		'rgba(255, 206, 86, 0.2)',
		'rgba(75, 192, 192, 0.2)',
		'rgba(153, 102, 255, 0.2)',
		'rgba(255, 159, 64, 0.2)'
	],
		borderColor: [
		'rgba(255, 99, 132, 1)',
		'rgba(54, 162, 235, 1)',
		'rgba(255, 206, 86, 1)',
		'rgba(75, 192, 192, 1)',
		'rgba(153, 102, 255, 1)',
		'rgba(255, 159, 64, 1)'
	],
		borderWidth: 2
            }],
		labels: ["Nombre d'utilisateurs ","Nombre d'utilisateurs connectés"]
        },
		options: {
		scales: {
			yAxes: [{
				ticks: {
					beginAtZero: true
				}
			}]
		}
	}
    });

</script>
{% endblock %}