{% extends "ErpProject/ModuleComptabilite/shared/layout.html" %}{% block page %}
{% load account_filters %} 
   <div class="row">
        <ul class="breadcrumb">
            <li><a><span class="mif-home"></span></a></li>
            <li><a class="chargement-au-click" href="{% url 'module_comptabilite_tableau_de_bord' %}">Module Comptabilité</a></li>
            <li><a class="chargement-au-click" href="{% url 'module_comptabilite_list_ligne_budgetaire' %}">Liste des Lignes Budgetaires</a></li>
            <li>{{ title }}</li>
        </ul>
    </div>

    <div class="row">
        <button onclick="javascript:window.location.assign('{% url 'module_comptabilite_update_ligne_budgetaire' model.id %}')" class="button small-button rounded primary_color_{{module.name|lower}} chargement-au-click">Modifier</button> 
        <button onclick="javascript:window.location.assign('{% url 'module_comptabilite_list_ligne_budgetaire' %}')" class="button small-button rounded chargement-au-click">Annuler</button>
    </div>
    <hr class="hr-ligne">
    <!-- Appel de la fonction message -->
        {% include 'ErpProject/ErpBackOffice/widget/message.html' with messages=messages only %}
    <br>
    

    <div class="row item-content" style="margin-top: 20px">
        <div class="col-md-12">
            <div class="row">
                <div class="col-md-6">
                    <p class="fg-gray">
                        Code de la Ligne Budgétaire :<br>
                        <span class="fg-dark"> {{ model.code }} </span>
                    </p>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <p class="fg-gray">
                        Désignation :<br>
                        <span class="fg-dark"> {{ model.designation }} </span>
                    </p>
                </div>
                <div class="col-md-6">
                    <p class="fg-gray">
                        Solde :<br>
                        <span class="fg-dark">{{ model.solde |monetary}}</span>
                    </p>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <p class="fg-gray">
                        Budget :<br>
                        {% if model.budget == None %}
                            {{ "-" }}
                        {% else %}
                            <span class="fg-dark"> <a href="{% url 'module_comptabilite_detail_budget' model.budget.id %}">{{ model.budget }}</a></span>
                        {% endif %}
                    </p>
                </div>
                <div class="col-md-6">
                    <p class="fg-gray">
                        Responsable :<br>
                        {% if model.responsable == None %}
                            {{ "-" }}
                        {% else %}
                            <span class="fg-dark">{{ model.responsable }}</span>
                        {% endif %}
                    </p>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <p class="fg-gray">
                        Date de Début :<br>
                        <span class="fg-dark">{{ model.date_debut|date:"d/m/Y" }}</span>
                    </p>
                </div>
                <div class="col-md-6">
                    <p class="fg-gray">
                        Date de Fin :<br>
                        <span class="fg-dark">{{ model.date_fin|date:"d/m/Y" }}</span>
                    </p>
                </div>
            </div>
        </div>

        
        <br>
        <div class="row"  style="margin-top: 40px">
            <div class="col-md-12">
                
                <br>
                <br>
                <p class="header">Toutes les transactions associées à cette ligne budgétaire</p>
                <table class="table dataTable striped border bordered" data-role="datatable" data-searching="true" style="width: 100%">
                    <thead>
                        <tr>
                            <th>Référence</th>
                            <th>Type de transaction</th>
                            <th>Date de la transaction</th>
                            <th>Montant</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in transactions %}
                            <tr>
                                <td> {{ item.reference }} </td>
                                <td> 
                                    {% for type_transaction in types_transactions %}
                                        {% if type_transaction.id == item.type %}
                                            {{ type_transaction.designation }}
                                        {% endif %}
                                    {% endfor %}
                                </td>
                                <td> {{ item.creation_date|date:"d/m/Y" }} à {{ item.creation_date|date:"h:m:s" }} </td>
                                <td align="right"> {{ item.montant |monetary}} </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>




{% endblock %}