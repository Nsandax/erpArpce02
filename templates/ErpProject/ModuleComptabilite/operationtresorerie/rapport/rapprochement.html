{% extends "ErpProject/ModuleBudget/shared/layout.html" %}
{% block page %}
{%load static %}
{% load account_filters %}
    <div class="row">
        <ul class="breadcrumb">
            <li><a><span class="mif-home"></span></a></li>
            <li><a class="chargement-au-click" href="{% url 'module_comptabilite_tableau_de_bord' %}">Module Comptabilité</a></li>
            <li>{{ title }}</li>
        </ul>
    </div>
    <div class="row">
        <div class="col-lg-12">

        <strong style="float: right;color: grey;opacity: 0.85;margin-top: -30px;">{% now "jS F Y H:i" %}</strong>
            <div class="separ" style="background-color: grey;opacity: 0.2"></div>
            <div class="panel panel-default" style="border: none;">
                <div class="panel panel-body" style="background-color:#f5f5f5;border: none;border-radius: none;">
                    <div class="row">
                         <!-- Impression -->
                         <form method="POST" action="{% url 'module_comptabilite_print_rapport_rapprochement_bancaire' %}">
                             {% csrf_token %}
                             <input type="hidden" name="id" value={{model.id}}>

                             <input type="hidden" name="date_debut" value={{date_debut}}>
                             <input type="hidden" name="date_fin" value={{date_fin}}>
                             <input type="hidden" name="compte_banque_id" value={{compte_banque_id}}>

                             <input type="hidden" name="is_printable" value='1'>
                             <input type="hidden" name="fonction" value='ModuleComptabilite.views.post_rapport_rapprochement(request)'>

                             <button type="submit" class="btn btn-default" id="submitOne" style="background-color: #41435d;border:none;color: white;">Imprimer</button>
                         </form>

                 <!-- Fin impression -->
                        <!--button class="theme-btn theme-btn-sm rounded primary_color_{{module.name|lower}} chargement-au-click">Imprimer</button-->

                    <hr class="hr-ligne">
                    <!-- Appel de la fonction message -->
                        {% include 'ErpProject/ErpBackOffice/widget/message.html' with messages=messages only %}
                    <br><br>
                    <img src="{% static 'ErpProject\image\header_rapport_o.png'%}" alt=""
                        style="width: 400px;height: 150px;">

                    <br>

                    <center>
                        <h1>{{ title }}</h1>
                    </center>

                    <div class ="row">
                    <div style="float:left; padding-left: 150px;">
                        <h4> Banque : {{ compte_banque.banque.designation }}</h4>
                        <h4> N° Compte : {{ compte_banque.numero_compte }}</h4>
                            <h4> Période : -</h4>
                    </div>

                    <div style="float:right;padding-right: 150px;">
                        <h4> Rapprochement établi par : {{ utilisateur }}</h4>
                        <h4>Signature</h4>
                    </div>
                </div>

                    <center>
                        <h4> Du {{ date_debut }} à {{date_fin}}</h4>
                    </center>

                    <div class="row">

                    <table class="display table nowrap border bordered striped" cellspacing="0" style="width:45%;float:left;" >
                        <thead>
                            <tr>
                                <th width="20%">Date</th>
                                <th width="40%">Libelle</th>
                                <th width="20%">Débit</th>
                                <th width="20%">Crédit</th>
                            </tr>
                        </thead>
                        <tbody>

                            {% for item in tableauLettres %}

                                <tr>

                                    <td>
                                        {{ item.date }}
                                    </td>
                                    <td>
                                        {{ item.libelle }}
                                    </td>
                                    <td>
                                        {{ item.debit |monetary}}
                                    </td>
                                    <td>
                                        {{ item.credit |monetary}}
                                    </td>
                                </tr>
                            {% endfor %}
                            <tr>
                                <td></td>
                                <td>Totaux</td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Solde après rapprochement</td>
                                <td></td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>

                    <table class="display table nowrap border bordered striped" cellspacing="0" style="width:45%;float:right;">
                        <thead>
                            <tr>
                                <th width="20%">Date</th>
                                <th width="40%">Libelle</th>
                                <th width="20%">Débit</th>
                                <th width="20%">Crédit</th>
                            </tr>
                        </thead>
                        <tbody>

                            {% for item in tableauLignes %}

                                <tr>

                                    <td>
                                        {{ item.date }}
                                    </td>
                                    <td>
                                        {{ item.libelle }}
                                    </td>
                                    <td>
                                        {{ item.debit |monetary}}
                                    </td>
                                    <td>
                                        {{ item.credit |monetary}}
                                    </td>

                                </tr>
                            {% endfor %}
                            <tr>
                                <td></td>
                                <td>Totaux</td>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>Solde après rapprochement</td>
                                <td></td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>




                </div>
                <left>
                    <h4> Commentaire:</h4>

                </left>
            </div>
        </div>
        <!-- /.col-lg-12 -->
    </div>

    <script>
        $(document).ready(function() {
            $('#example').DataTable( {

            } );
            $('#example2').DataTable( {

            } );
        } );
        function floatVal(char){
            floatValue = parseFloat(char.trim().replace(',', '.').replace(/\s/g, ''))
            return floatValue;
        }

        // Dialogue Lignes ouverture
    function launchDialogOuverture(url){
		console.log(window)
		var newwindow = window.open(url, '','_blank, height = 9000, width = 9000');
		console.log(newwindow)
	}
    </script>
{% endblock %}